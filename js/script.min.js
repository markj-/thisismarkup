(function(a){a(function(){var b={};b.paths=(function(){return{ROOT:"/thisismarkup/"}}());b.Portfolio=function(c){this.el=c;this.loadedClass="loaded";this.delay=undefined;this.items=c.find(".item");this.itemCanvases=[];this.overlayClass="overlay";this.imagesToLoad=this.items.length;this.imagesLoaded=0};b.Portfolio.prototype.display=function(){this.el.addClass(this.loadedClass);this.items.fadeIn()};b.Portfolio.prototype.loaded=function(){this.display();clearTimeout(this.delay)};b.Portfolio.prototype.addCanvas=function(c,d){this.itemCanvases.push(c);d.children("a").append(c.canvas)};b.Portfolio.prototype.grayscale=function(m,e,g){var k=m.getImageData(0,0,e,g),d,l;for(l=0;l<k.height;l+=1){for(d=0;d<k.width;d+=1){var f=(l*4)*k.width+d*4,j=(k.data[f]+k.data[f+1]+k.data[f+2])/3;k.data[f]=j;k.data[f+1]=j;k.data[f+2]=j}}m.putImageData(k,0,0,0,0,k.width,k.height)};b.Portfolio.prototype.createCanvas=function(f,g){var e=a("<canvas />"),j=e[0].getContext("2d"),h=a(g),d=h.find("img").attr("src");this.addCanvas({canvas:e,context:j,img:d},h)};b.Portfolio.prototype.loadImage=function(g,h){var d=this,c=a(new Image()),j=this.grayscale,f=a.proxy(this.loaded,this),e;c.load(function(){e=h.canvas[0];e.setAttribute("width",this.width);e.setAttribute("height",this.height);h.context.drawImage(this,0,0,this.width,this.height);j(h.context,this.width,this.height);d.imagesLoaded++;if(d.imagesLoaded===d.imagesToLoad){f()}}).attr("src",h.img)};b.Portfolio.prototype.hideOverlay=function(c){a(c).animate({left:"-240px"},200)};b.Portfolio.prototype.showOverlay=function(h,f){var g=a(f),c=g.parents(".item").find("."+this.overlayClass),d="0px";if(!g.parents("."+this.overlayClass).length){h.preventDefault()}c.animate({left:d},200)};b.Portfolio.prototype.toggle=function(c){a(c).children("canvas").fadeToggle("fast")};b.Portfolio.prototype.bindEvents=function(){var c=a.proxy(this.toggle,this),f=a.proxy(this.hideOverlay,this),e=a.proxy(this.showOverlay,this),d=this.items.find("a");if(Modernizr.canvas&&!Modernizr.touch){d.on({mouseenter:function(){c(this)},mouseleave:function(){c(this)}})}d.on("click",function(g){e(g,this)});a("."+this.overlayClass).on("mouseleave",function(){f(this)})};b.Portfolio.prototype.setup=function(){if(Modernizr.canvas){a.each(this.items,a.proxy(this.createCanvas,this));a.each(this.itemCanvases,a.proxy(this.loadImage,this))}else{this.loaded()}this.bindEvents()};b.Portfolio.prototype.init=function(){if(this.el.length){this.delay=setTimeout(a.proxy(this.setup,this),500)}};b.SyntaxHighlighter=function(){this.el=a(".prettyprint");this.paths=b.paths};b.SyntaxHighlighter.prototype.load=function(){var c=this;a.ajax({url:c.paths.ROOT+"js/plugins/prettify.min.js",dataType:"script",success:function(){prettyPrint()},error:function(){}})};b.SyntaxHighlighter.prototype.init=function(){if(this.el.length){this.load()}};b.app=(function(){new b.Portfolio(a(".portfolio")).init();new b.SyntaxHighlighter().init()}())})}(jQuery));window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){console.log(Array.prototype.slice.call(arguments))}};